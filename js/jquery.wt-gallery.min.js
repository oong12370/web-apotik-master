(function(a){a.fn.wtGallery=function(C){var y=100;var o=5000;var l=800;var x=800;var v=600;var u=500;var d=50;var z="top";var k="bottom";var g=0.5;var c="update_imgbtns";var h="update_imginfo";var j="update_index";var w="update_thumbinfo";var r="update_thumbbtns";var A="start_timer";var n="reset_timer";var B="pause_timer";var i=new Array(25);i.fade=0;i["vert.tl"]=1;i["vert.tr"]=2;i["vert.bl"]=3;i["vert.br"]=4;i["fade.left"]=5;i["fade.right"]=6;i["alt.left"]=7;i["alt.right"]=8;i["blinds.left"]=9;i["blinds.right"]=10;i["vert.random.fade"]=11;i["horz.tl"]=12;i["horz.tr"]=13;i["horz.bl"]=14;i["horz.br"]=15;i["fade.top"]=16;i["fade.bottom"]=17;i["alt.top"]=18;i["alt.bottom"]=19;i["blinds.top"]=20;i["blinds.bottom"]=21;i["horz.random.fade"]=22;i.random=23;i.none=24;function e(T,P,N,R,M,H,I){var J;var F;var L;var Q=null;var S=function(){L=Math.ceil(P/R);var V="";for(var U=0;U<L;U++){V+="<div class='vpiece' id='"+U+"'></div>"}T.addToScreen(V);J=a("div.vpiece",T.$el);F=new Array(L);J.each(function(W){a(this).css({left:(W*R),height:N});F[W]=a(this)})};this.clear=function(){clearInterval(Q);J.stop(true).css({"z-index":2,opacity:0})};this.displayContent=function(U,V){E(U,V);if(V==i["vert.random.fade"]){O(U)}else{G(U,V)}};var E=function(U,V){switch(V){case i["vert.tl"]:case i["vert.tr"]:K(U,-N,1,R,false);break;case i["vert.bl"]:case i["vert.br"]:K(U,N,1,R,false);break;case i["alt.left"]:case i["alt.right"]:K(U,0,1,R,true);break;case i["blinds.left"]:case i["blinds.right"]:K(U,0,1,0,false);break;default:K(U,0,0,R,false)}};var K=function(U,aa,ab,W,Z){var ad=U.attr("src");var ac=(N-U.height())/2;var V=(P-U.width())/2;for(var X=0;X<L;X++){var Y=((-X*R)+V);if(Z){aa=(X%2)==0?-N:N}a(J.get(X)).css({background:M+" url('"+ad+"') "+Y+"px "+ac+"px no-repeat",backgroundPositionX:Y+"px",backgroundPositionY:ac+"px",opacity:ab,top:aa,width:W,"z-index":3})}};var G=function(W,X){var Z,V,Y,U;switch(X){case i["vert.tl"]:case i["vert.bl"]:case i["fade.left"]:case i["blinds.left"]:case i["alt.left"]:Z=0;V=L-1;Y=1;break;default:Z=L-1;V=0;Y=-1}Q=setInterval(function(){a(J.get(Z)).animate({top:0,opacity:1,width:R},H,"",function(){if(a(this).attr("id")==V){T.setComplete(W)}});if(Z==V){clearInterval(Q)}Z+=Y},I)};var O=function(V){q(F);var U=0;var W=0;Q=setInterval(function(){F[U++].animate({opacity:1},H,"",function(){if(++W==L){T.setComplete(V)}});if(U==L){clearInterval(Q)}},I)};S()}function t(T,P,N,R,M,H,I){var J;var F;var L;var Q=null;var S=function(){L=Math.ceil(N/R);var V="";for(var U=0;U<L;U++){V+="<div class='hpiece' id='"+U+"'><!-- --></div>"}T.addToScreen(V);J=a("div.hpiece",T.$el);F=new Array(L);J.each(function(W){a(this).css({top:(W*R),width:P});F[W]=a(this)})};this.clear=function(){clearInterval(Q);J.stop(true).css({"z-index":2,opacity:0})};this.displayContent=function(U,V){E(U,V);if(V==i["horz.random.fade"]){O(U)}else{G(U,V)}};var E=function(U,V){switch(V){case i["horz.tr"]:case i["horz.br"]:K(U,P,1,R,false);break;case i["horz.tl"]:case i["horz.bl"]:K(U,-P,1,R,false);break;case i["alt.top"]:case i["alt.bottom"]:K(U,0,1,R,true);break;case i["blinds.top"]:case i["blinds.bottom"]:K(U,0,1,0,false);break;default:K(U,0,0,R,false)}};var K=function(U,X,aa,ac,Z){var ad=U.attr("src");var ab=(N-U.height())/2;var V=(P-U.width())/2;for(var Y=0;Y<L;Y++){var W=((-Y*R)+ab);if(Z){X=(Y%2)==0?-P:P}a(J.get(Y)).css({background:M+" url('"+ad+"') "+V+"px "+W+"px no-repeat",backgroundPositionX:V+"px",backgroundPositionY:W+"px",opacity:aa,left:X,height:ac,"z-index":3})}};var G=function(V,W){var Y,U,X;switch(W){case i["horz.tl"]:case i["horz.tr"]:case i["fade.top"]:case i["blinds.top"]:case i["alt.top"]:Y=0;U=L-1;X=1;break;default:Y=L-1;U=0;X=-1}Q=setInterval(function(){a(J.get(Y)).animate({left:0,opacity:1,height:R},H,"",function(){if(a(this).attr("id")==U){T.setComplete(V)}});if(Y==U){clearInterval(Q)}Y+=X},I)};var O=function(V){q(F);var U=0;var W=0;Q=setInterval(function(){F[U++].animate({opacity:1},H,"",function(){if(++W==L){T.setComplete(V)}});if(U==L){clearInterval(Q)}},I)};S()}function s(bH,bF){var a3=f(bF.num_display,5);var ay=f(bF.screen_width,720);var bx=f(bF.screen_height,405);var av=f(bF.thumb_width,125);var ao=f(bF.thumb_height,70);var bi=bF.cont_imgnav;var P=bF.cont_thumbnav;var bc=bF.display_imgnav;var bu=bF.display_imgnum;var aa=bF.display_timer;var ak=bF.display_thumbnav;var bB=bF.display_thumbnum;var ab=bF.display_arrow;var aI=bF.display_tooltip;var a5=bF.display_indexes;var bE=bF.mouseover_text;var ar=bF.mouseover_info;var L=bF.mouseover_buttons;var a0=bF.mouseover_caption;var by=bF.caption_align.toLowerCase();var an=bF.transition.toLowerCase();var X=f(bF.delay,o);var aE=f(bF.transition_speed,x);var bo=f(bF.scroll_speed,v);var ap=bF.move_one;var R=bF.shuffle;var ai;var N;var ax;var a7;var aT;var aC;var I;var bt;var T;var aW;var aR;var G;var ad;var aP;var bn=null;var ba=a(".wt-gallery",bH);var bj=ba.find(".main-screen");var F;var aD;var S;var bp;var aX;var bd;var be=ba.find(".thumbnails");var bI=be.find(">ul");var ac=bI.find(">li");var aG=ac.find(">div:first");var H=ba.find(".cpanel");var aL=H.find("#thumbs-back");var ag=H.find("#thumbs-fwd");var aY=H.find(".cbar");var bv=H.find(".thumb-info");var M;var aJ;var ae;var V;var Z;this.$el=bH;this.init=function(){aC=0;I=-1;bt=0;ai=ac.size();if(ai<=a3){ak=a5=false;a3=ai}aT=ai-a3;ax=0;a7=aT;aO();bD();bf();var bK=bj.outerWidth()>H.outerWidth()?bj.outerWidth():H.outerWidth();var bL=bj.outerHeight()+H.outerHeight();ba.css({width:bK,height:bL,padding:D(bF.padding,0)});a(document).keyup(aZ);var bJ=bF.auto_rotate;if(bJ){aR=true;ba.bind(A,bb).bind(B,O).bind(n,br).hover(aA,aK)}var bM=bj.css("background-color");T=new e(this,ay,bx,f(bF.vert_size,d),bM,aE,f(bF.vstripe_delay,y));aW=new t(this,ay,bx,f(bF.horz_size,d),bM,aE,f(bF.hstripe_delay,y));bl(0);aN(aC);Y()};this.setComplete=function(bJ){E(bJ)};this.addToScreen=function(bJ){aD.append(bJ)};var aO=function(){var bJ="<a href='#'></a>								<div id='prev-btn'></div>								<div id='next-btn'></div>								<div class='desc'></div>								<div class='info'></div>								<div class='preloader'></div>";bj.append(bJ);aD=bj.find(">a:first");S=bj.find("#prev-btn");bp=bj.find("#next-btn");aX=bj.find(".desc");bd=bj.find(".info");F=bj.find(".preloader");bj.css({width:ay,height:bx});ad=(b(6)&&bx%2!=0)?-1:0;bq();aS();ah()};var bq=function(){if(bc){var bJ=0;var bK=ay-bp.width();if(L){S.data({offset:-S.width(),pos:bJ}).css({left:S.data("offset")});bp.data({offset:ay,pos:bK}).css({left:bp.data("offset")});bj.hover(bz,bG)}else{S.css({left:bJ});bp.css({left:bK})}S.css("visibility","visible").mousedown(al).click(az);bp.css("visibility","visible").mousedown(al).click(K);if(!bi){ba.bind(c,a4)}}else{S.hide();bp.hide()}};var bz=function(){S.stop().animate({left:S.data("pos")},u);bp.stop().animate({left:bp.data("pos")},u)};var bG=function(){S.stop().animate({left:S.data("offset")},u);bp.stop().animate({left:bp.data("offset")},u)};var a4=function(){S.css((aC==0)?{opacity:0,cursor:"default"}:{opacity:1,cursor:"pointer"});bp.css((aC==ai-1)?{opacity:0,cursor:"default"}:{opacity:1,cursor:"pointer"})};var aS=function(){var bK,bJ;if(bF.text_align.toLowerCase()==k){bK=k;bJ=ad}else{bK=z;bJ=0}aX.data("align",bK).append("<div class='inner-text'></div>");Z=aX.find("div.inner-text");if(bE){aX.css(bK,-aX.height()+bJ);bj.data("hover",false).hover(af,am)}else{aX.css(bK,bJ)}};var bg=function(){var bK=aJ[aC].find("div.data>div:first").html();var bJ=aJ[aC].data("textHeight");if(bE&&!bj.data("hover")){aX.stop(true).css(aX.data("align"),-bJ).height(bJ);Z.html(bK)}else{Z.html("");aX.stop(true).animate({height:bJ},u,function(){Z.html(bK)})}};var af=function(){bj.data("hover",true);aX.stop(true,true).animate(aX.data("align")==z?{top:0}:{bottom:ad},u)};var am=function(){bj.data("hover",false);aX.stop(true,true).animate(aX.data("align")==z?{top:-aX.height()}:{bottom:-aX.height()+ad},u)};var ah=function(){bd.append("<div id='timer'></div>");V=bd.find("#timer").data("pct",1);if(!bu&&!aa){bd.hide();return}var bK,bJ;if(aX.data("align")==z){bK=k;bJ=ad}else{bK=z;bJ=0}bd.data("align",bK).css("visibility","visible");if(ar){bd.css(bK,-bd.height()+bJ);bj.hover(a1,a8)}else{bd.css(bK,bJ)}if(bu){bd.append("<div class='inner-info'></div>");ba.bind(h,aq)}if(aa){V.css("visibility","visible")}};var a1=function(){bd.stop().animate((bd.data("align")==k)?{bottom:ad}:{top:0},u)};var a8=function(){bd.stop().animate((bd.data("align")==k)?{bottom:-bd.height()+ad}:{top:-bd.height()},u)};var aq=function(){bd.find("div.inner-info").html((aC+1)+" / "+ai)};var bf=function(){var bJ=ac.find(">div:first>p:first");if(aI){bJ.hide();a("body").append("<div id='gallery-tooltip'><div class='tt-txt'></div></div>");M=a("#gallery-tooltip");if(by==z){M.data("bottom",false).addClass("txt-up")}else{M.data("bottom",true).addClass("txt-down")}if(b(6)){M.css("background-image","none").find(":only-child").css("margin",0)}}else{var bK=bJ.outerWidth()-bJ.width();bJ.width(av-bK)}aJ=new Array(ai);ac.each(function(bR){var bO=a(this).find(">div:first");var bN=bO.find(">a:first");var bM=bN.find("img");var bQ=bO.find(">p:first");var bL=a(this).find(">div.data>div:first");var bP=(bL.length>0&&bL.html()!="")?Z.html(bL.html()).outerHeight():0;a(this).data({imgurl:bN.attr("href"),caption:bQ.html(),effect:i[a(this).attr("effect")]!=undefined?i[a(this).attr("effect")]:i[an],delay:f(a(this).attr("delay"),X),textHeight:bP});bM[0].complete?at(bM):bM.load(J);bO.hover(bk,a6);if(bQ.length>0&&bQ.html()!=""){if(aI){bO.hover(bA,aV).mousemove(W)}else{if(a0){bO.hover(a9,bh);bQ.css("top",by==k?ao:-bQ.outerHeight())}else{bQ.css("top",by==k?ao-bQ.outerHeight():0)}}}aJ[bR]=a(this)});Z.html("");aX.css("visibility","visible");if(R){Q()}};var aF=function(bK){var bJ=a(bK.target).parents("li").index();if(bJ>=0&&bJ!=aC){ba.trigger(n);I=aC;aC=bJ;aN(aC)}return false};var bk=function(){a(this).addClass("thumb-over")};var a6=function(){a(this).removeClass("thumb-over")};var a9=function(){var bJ=a(this).find(">p:first");bJ.stop().animate({top:(by==k)?ao-bJ.outerHeight():0},300)};var bh=function(){var bJ=a(this).find(">p:first");bJ.stop().animate({top:(by==k)?ao:-bJ.outerHeight()},300)};var bA=function(bK){var bJ=a(this).parent().data("caption");var bL=M.data("bottom")?0:-M.outerHeight(true);M.find(">div.tt-txt").html(bJ);M.css({top:bK.pageY+bL,left:bK.pageX}).stop(true,true).delay(l).fadeIn(300)};var W=function(bJ){var bK=M.data("bottom")?0:-M.outerHeight(true);M.css({top:bJ.pageY+bK,left:bJ.pageX})};var aV=function(){M.stop(true,true).fadeOut(0)};var bD=function(){var bK=D(bF.thumb_margin,0);aG.css({width:av,height:ao});ac.css({"margin-right":bK});N=ac.outerWidth(true);be.width((a3*aG.outerWidth())+((a3-1)*bK)).click(aF);bI.width(ai*N);if(ak){var bJ=aG.outerHeight();var bL=aG.css("margin-top");aL.css({height:bJ,"margin-top":bL}).mousedown(al).click(aH);ag.css({height:bJ,"margin-top":bL}).mousedown(al).click(aM);if(!P){ba.bind(r,bs)}}else{aL.remove();ag.remove()}U();aP=ab?"curr-arrow":"curr";H.width(be.outerWidth()+aL.outerWidth()+ag.outerWidth());H.height(be.outerHeight()+aY.outerHeight())};var U=function(){if(!bB){bv.hide();if(!a5){aY.remove();return}}aY.css({width:be.outerWidth(),"margin-left":aL.outerWidth(),"margin-right":ag.outerWidth()});if(a5){var bL=Math.ceil(ai/a3);var bK="";for(var bJ=0;bJ<bL;bJ++){bK+="<span class='index'></span>"}aY.append(bK);ae=aY.find("span.index");ae.each(function(bM){a(this).mousedown(al).click(function(){aB(bM);return false})});ba.bind(j,a2)}ba.bind(w,aU)};var Y=function(){ba.trigger(j).trigger(w).trigger(r)};var a2=function(){if(ax%a3==0||ax==aT){var bJ=Math.ceil(ax/a3);ae.filter(".index-hl").removeClass("index-hl");a(ae.get(bJ)).addClass("index-hl")}};var aU=function(){var bK=Math.abs(bt/N);var bJ=bK+a3;bv.html((bK+1)+" - "+bJ+" / "+ai)};var bs=function(){var bK=Math.abs(bt/N);var bJ=bK+a3;aL.css((bK>0)?{opacity:1,cursor:"pointer"}:{opacity:g,cursor:"default"});ag.css((bJ<ai)?{opacity:1,cursor:"pointer"}:{opacity:g,cursor:"default"})};var az=function(){if(aC>0){I=aC;aC--}else{if(bi){I=aC;aC=ai-1}else{return}}ba.trigger(n);aN(aC);au(aC);return false};var K=function(){if(aC<ai-1){I=aC;aC++}else{if(bi){I=aC;aC=0}else{return}}ba.trigger(n);aN(aC);au(aC);return false};var aj=function(){I=aC;aC=(aC<ai-1)?aC+1:0;ba.trigger(n);aN(aC);au(aC)};var aH=function(){if(a7<aT){var bJ=ap?1:Math.min(aT-a7,a3);a7+=bJ;ax-=bJ}else{if(P){a7=0;ax=aT}else{return}}bw();return false};var aM=function(){if(ax<aT){var bJ=ap?1:Math.min(aT-ax,a3);ax+=bJ;a7-=bJ}else{if(P){ax=0;a7=aT}else{return}}bw();return false};var bw=function(){bt=-ax*N;bI.stop(true,true).animate({left:bt},bo);Y()};var au=function(bJ){aB(Math.floor(bJ/a3))};var aB=function(bJ){var bK=bJ*a3;if(bK>aT){bK=aT}ax=bK;a7=aT-bK;bw()};var aA=function(){aR=false;ba.trigger(B)};var aK=function(){aR=true;ba.trigger(A)};var aN=function(bL){bI.find(">li."+aP).removeClass(aP);aJ[bL].addClass(aP);G=aJ[bL].data("delay");var bM=aJ[bL].find("div.data>a");var bJ=bM.attr("href");if(bJ){aD.unbind("click").css({cursor:"pointer"}).attr({href:bJ,target:bM.attr("target")})}else{aD.click(al).css({cursor:"default"})}ba.trigger(h).trigger(c);bg();if(aJ[bL].data("img")){F.hide();aQ(aJ[bL].data("img"))}else{var bK=a("<img class='main-img'/>");bK.attr("src",aJ[bL].data("imgurl"));if(!bK[0].complete){F.show();bK.load(function(){F.hide();bC(aJ[bL],a(this));aQ(a(this))}).error(function(){alert("Error loading image")})}else{F.hide();bC(aJ[bL],bK);aQ(bK)}}};var aQ=function(bJ){T.clear();aW.clear();aw();var bK=aJ[aC].data("effect");if(bK==i.none){E(bJ);return}if(bK==i.random){bK=Math.floor(Math.random()*(i.length-2))}if(bK==i.fade){bm(bJ)}else{if(bK<i["horz.tl"]){T.displayContent(bJ,bK)}else{aW.displayContent(bJ,bK)}}};var aw=function(){if(I>=0){var bK=a("img#curr-img").attr("src");var bL=aJ[I].data("imgurl");if(bK!=bL){a("img.main-img",aD).removeAttr("id").hide();var bJ=a("img.main-img",aD).filter(function(){return a(this).attr("src")==bL});a(bJ.get(0)).show()}}};var E=function(bJ){a("img.main-img",aD).removeAttr("id").hide();bJ.attr("id","curr-img").show();ba.trigger(A)};var bm=function(bJ){a("img#curr-img",aD).stop(true,true);a("img.main-img",aD).removeAttr("id").css("z-index",0);bJ.attr("id","curr-img").css("z-index",1).stop(true,true).fadeIn(aE,function(){a("img.main-img:not('#curr-img')",aD).hide();ba.trigger(A)})};var J=function(){at(a(this))};var at=function(bJ){var bK;if(bJ.outerWidth()>av){bK=bJ.outerHeight()/bJ.outerWidth();bJ.width(av);bJ.height(bK*av)}if(bJ.outerHeight()>ao){bK=bJ.outerWidth()/bJ.outerHeight();bJ.width(bK*ao);bJ.height(ao)}bJ.css({left:Math.round((av-bJ.outerWidth())/2),top:Math.round((ao-bJ.outerHeight())/2)})};var bl=function(bK){var bJ=aJ[bK];var bL=a("<img class='main-img'/>");bL.attr("src",bJ.data("imgurl"));bL.load(function(){if(!bJ.data("img")){bC(bJ,a(this))}bK++;if(bK<aJ.length){bl(bK)}}).error(function(){bK++;if(bK<aJ.length){bl(bK)}})};var bC=function(bL,bN){aD.append(bN);var bQ=(bx-bN.height())/2;var bM=(ay-bN.width())/2;var bP=0,bO=0,bK=0,bJ=0;if(bQ>0){bK=bQ}else{if(bQ<0){bP=bQ}}if(bM>0){bJ=bM}else{if(bM<0){bO=bM}}bN.css({top:bP,left:bO,"padding-top":bK,"padding-bottom":bK,"padding-left":bJ,"padding-right":bJ});bL.data("img",bN)};var Q=function(){for(var bL=0;bL<aJ.length;bL++){var bJ=Math.floor(Math.random()*aJ.length);var bK=aJ[bL];aJ[bL]=aJ[bJ];aJ[bJ]=bK}for(var bL=0;bL<aJ.length;bL++){aJ[bL]=aJ[bL].clone(true)}for(var bL=0;bL<aJ.length;bL++){a(ac.get(bL)).replaceWith(aJ[bL])}};var bb=function(){if(aR&&bn==null){var bJ=Math.round(V.data("pct")*G);V.animate({width:(ay+2)},bJ);bn=setTimeout(aj,bJ)}};var br=function(){clearTimeout(bn);bn=null;V.stop(true).width(0).data("pct",1)};var O=function(){clearTimeout(bn);bn=null;var bJ=1-(V.width()/(ay+2));V.stop(true).data("pct",bJ)};var al=function(){return false};var aZ=function(bJ){switch(bJ.keyCode){case 37:az();break;case 39:K();break}}}var b=function(E){if(jQuery.browser.msie&&parseInt(jQuery.browser.version)<=E){return true}return false};var q=function(E){var I=E.length;for(var H=0;H<I;H++){var F=Math.floor(Math.random()*I);var G=E[H];E[H]=E[F];E[F]=G}};var f=function(E,F){if(!isNaN(E)&&E>0){return E}return F};var D=function(E,F){if(!isNaN(E)&&E>=0){return E}return F};var m={num_display:5,screen_width:720,screen_height:405,padding:10,thumb_width:125,thumb_height:70,thumb_margin:5,text_align:z,caption_align:k,auto_rotate:true,delay:o,cont_imgnav:true,cont_thumbnav:true,display_imgnav:true,display_imgnum:true,display_timer:true,display_thumbnav:true,display_indexes:true,display_thumbnum:true,display_tooltip:false,display_arrow:true,mouseover_text:false,mouseover_info:false,mouseover_caption:false,mouseover_buttons:true,transition:"fade",transition_speed:x,scroll_speed:v,vert_size:d,horz_size:d,vstripe_delay:y,hstripe_delay:y,move_one:false,shuffle:false};var p=a.extend({},m,C);return this.each(function(){var E=new s(a(this),p);E.init()})}})(jQuery);